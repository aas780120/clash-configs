port: 7890
socks-port: 7891
redir-port: 7892
mixed-port: 7893
allow-lan: true
bind-address: '*'
mode: rule
log-level: info
ipv6: false
external-controller: 127.0.0.1:9090
external-ui: dashboard

# DNS 配置
dns:
  enable: true
  listen: 0.0.0.0:53
  ipv6: false
  default-nameserver:
    - 223.5.5.5
    - 119.29.29.29
    - 8.8.8.8
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  fake-ip-filter:
    - '*.lan'
    - '*.local'
    - localhost.ptlogin2.qq.com
  nameserver:
    - https://doh.pub/dns-query
    - https://dns.alidns.com/dns-query
    - https://1.1.1.1/dns-query
    - https://1.0.0.1/dns-query

# 代理節點
proxies:
  # WiFi-PK 節點組
  - name: "WiFi-PK-9005"
    type: http
    server: 34.141.138.189
    port: 9005
    username: e048ce51-6cc93f08-rand
    password: wifi-pk---

  - name: "WiFi-PK-9006"
    type: http
    server: 34.141.138.189
    port: 9006
    username: e048ce51-6cc93f08-rand
    password: wifi-pk---

  - name: "WiFi-PK-9007"
    type: http
    server: 34.141.138.189
    port: 9007
    username: e048ce51-6cc93f08-rand
    password: wifi-pk---

  - name: "WiFi-PK-9008"
    type: http
    server: 34.141.138.189
    port: 9008
    username: e048ce51-6cc93f08-rand
    password: wifi-pk---

  - name: "WiFi-PK-9009"
    type: http
    server: 34.141.138.189
    port: 9009
    username: e048ce51-6cc93f08-rand
    password: wifi-pk---

  # Mobile-PK 節點組
  - name: "Mobile-PK-9001"
    type: http
    server: 34.141.138.189
    port: 9001
    username: e048ce51-6cc93f08-95ec28
    password: mobile-pk---

  - name: "Mobile-PK-9002"
    type: http
    server: 34.141.138.189
    port: 9002
    username: e048ce51-6cc93f08-f66442
    password: mobile-pk---

  - name: "Mobile-PK-9003"
    type: http
    server: 34.141.138.189
    port: 9003
    username: e048ce51-6cc93f08-41d13b
    password: mobile-pk---

  - name: "Mobile-PK-9004"
    type: http
    server: 34.141.138.189
    port: 9004
    username: e048ce51-6cc93f08-80459c
    password: mobile-pk---

  - name: "Mobile-PK-9005"
    type: http
    server: 34.141.138.189
    port: 9005
    username: e048ce51-6cc93f08-382081
    password: mobile-pk---

# 代理組
proxy-groups:
  - name: PK
    type: select
    proxies:
      - WiFi-PK-Auto
      - Mobile-PK-Auto
      - WiFi-PK-9005
      - WiFi-PK-9006
      - WiFi-PK-9007
      - WiFi-PK-9008
      - WiFi-PK-9009
      - Mobile-PK-9001
      - Mobile-PK-9002
      - Mobile-PK-9003
      - Mobile-PK-9004
      - Mobile-PK-9005

  - name: WiFi-PK-Auto
    type: url-test
    proxies:
      - WiFi-PK-9005
      - WiFi-PK-9006
      - WiFi-PK-9007
      - WiFi-PK-9008
      - WiFi-PK-9009
    url: 'http://www.gstatic.com/generate_204'
    interval: 300

  - name: Mobile-PK-Auto
    type: url-test
    proxies:
      - Mobile-PK-9001
      - Mobile-PK-9002
      - Mobile-PK-9003
      - Mobile-PK-9004
      - Mobile-PK-9005
    url: 'http://www.gstatic.com/generate_204'
    interval: 300

  - name: Google-Play
    type: select
    proxies:
      - PK
      - WiFi-PK-Auto
      - Mobile-PK-Auto
      - DIRECT

# 分流規則（只代理 Google Play）
rules:
  - DOMAIN,play.googleapis.com,Google-Play
  - DOMAIN,android.clients.google.com,Google-Play
  - DOMAIN,play.google.com,Google-Play
  - DOMAIN,accounts.google.com,Google-Play
  - DOMAIN,oauth2.googleapis.com,Google-Play
  - DOMAIN,www.googleapis.com,Google-Play
  - DOMAIN-SUFFIX,googleplay.cn,Google-Play
  - DOMAIN-SUFFIX,play-games.googleusercontent.com,Google-Play
  - DOMAIN-KEYWORD,googleplay,Google-Play
  - DOMAIN-KEYWORD,play-fe,Google-Play
  - DOMAIN-KEYWORD,play.google,Google-Play
  - DOMAIN,myaccount.google.com,Google-Play
  - DOMAIN,accounts.youtube.com,Google-Play
  - DOMAIN-SUFFIX,googleusercontent.com,Google-Play
  - DOMAIN-SUFFIX,gstatic.com,Google-Play

  - DOMAIN-SUFFIX,local,DIRECT
  - IP-CIDR,127.0.0.0/8,DIRECT
  - IP-CIDR,172.16.0.0/12,DIRECT
  - IP-CIDR,192.168.0.0/16,DIRECT
  - IP-CIDR,10.0.0.0/8,DIRECT
  - IP-CIDR,17.0.0.0/8,DIRECT
  - IP-CIDR,100.64.0.0/10,DIRECT
  - GEOIP,CN,DIRECT
  - MATCH,DIRECT
